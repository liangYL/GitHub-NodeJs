<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
<title>秒杀</title>     

<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>

</head>
<body>

<h2>AJAX</h2>
<button type="button" onclick="loadXMLDoc()">get请求数据</button>
<button type="button" onclick="loadXMLDocP()">post请求数据</button>
<button type="button" onclick="loadXMLDocSql()">数据库请求数据</button>
<div id="myDiv"></div>
<hr>
<div id="name"></div>
<hr>
<div id="age"></div>
<hr>
<img id="img" width="100" height="100"/>
<hr>
<form action="/f" method="post" enctype="multipart/form-data">
<input type="file" name="file" size="50" />
<br/>
<input type="submit" value="上传文件" />
</form>
<script type="text/javascript">
    function loadXMLDoc()
    {
        $.ajax({
                type: "GET",
                url: "http://127.0.0.1:3000/d",
                async: true,
                data: '',
                dataType: "json",
                success: function(data) {
                    console.log(data);
                    $('#myDiv').html('获取数据:'+JSON.stringify(data));
                    $('#name').html('姓名:'+data.name);
                    $('#age').html('年龄:'+data.age);
                    $('#img').attr('src',data.src);

                },
                error:function(e){
                    $('#myDiv').html(JSON.stringify(e));
    
                }
            });
    }
    function loadXMLDocP()
    {
        var jsonm = {
            'name':'小王',
            'age':'100'
        }
        $.ajax({
                type: "POST",
                url: "http://127.0.0.1:3000/e",
                async: true,
                data: jsonm,
                dataType: "json",
                success: function(data) {
                    console.log(data);
                    $('#myDiv').html('获取数据:'+JSON.stringify(data));
                    $('#name').html('姓名:'+data.name);
                    $('#age').html('年龄:'+data.age);
                    $('#img').attr('src',data.src);

                },
                error:function(e){
                    $('#myDiv').html(JSON.stringify(e));
    
                }
            });
    }
    function loadXMLDocSql()
    {
    
        $.ajax({
                type: "GET",
                url: "http://127.0.0.1:3000/g",
                async: true,
                dataType: "json",
                success: function(data) {
                    console.log(data);
                    $('#myDiv').html('获取数据:'+JSON.stringify(data));
                

                },
                error:function(e){
                    $('#myDiv').html(JSON.stringify(e));
    
                }
            });
    }

    </script>
</body>
</html>
